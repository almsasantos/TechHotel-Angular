!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.name=t():(e["angular-osm"]=e["angular-osm"]||{},e["angular-osm"].name=t())}(this,function(){return function(e){function t(u){if(n[u])return n[u].exports;var r=n[u]={exports:{},id:u,loaded:!1};return e[u].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=u(r),i=n(3),a=u(i),s=angular.module("osm.api",[a.default.name]).provider("osmAPI",function(){this.options={url:"http://api.openstreetmap.org/api"},this.$get=function(e,t,n){return new o.default(e,t,n,this.options)},this.$get.$inject=["$http","$q","osmx2js"]});t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),r=function(){function e(t,u,r,o){n(this,e),this.url=o.url,this.$http=t,this.$q=u,this.osmx2js=r,this._oauth=null}return u(e,[{key:"setAuthAdapter",value:function(e){this._oauth=e}},{key:"getAuthAdapter",value:function(){return this._oauth}},{key:"xhr",value:function(e){this.$q.defer();return this._oauth.xhr(e)}},{key:"getAuthenticated",value:function(e,t){var n=angular.copy(t);return n||(n={}),n.method="GET",n.path=e,this.xhr(n)}},{key:"get",value:function(e,t){var n=this.$q.defer(),u=this,r=this.url+e;return this.$http.get(r,t).then(function(e){n.resolve(u.osmx2js.xml2js(e.data))},function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t,n){n||(n={});var u=angular.copy(n);return u.method="PUT",u.path=e,u.data=this.osmx2js.js2xml(t),u.options={},u.options.header={"Content-Type":"text/xml"},this.xhr(u)}},{key:"delete",value:function(e,t){t||(t={});var n=angular.copy(t);return n.method="DELETE",n.path=e,this.xhr(n)}},{key:"createChangeset",value:function(e,t){var n=this.$q.defer(),u={osm:{changeset:{tag:[{_k:"created_by",_v:t||"Angular-OSM"},{_k:"comment",_v:e}]}}};return this.put("/0.6/changeset/create",u).then(function(e){n.resolve(e)}),n.promise}},{key:"getLastOpenedChangesetId",value:function(){var e=this.$q.defer(),t={params:{user:this._oauth.getUserID(),open:!0}};return this.get("/0.6/changesets",t).then(function(t){var n=t.osm.changeset;n.length>0?e.resolve(n[0].id):n._id?e.resolve(n._id):e.resolve()}),e.promise}},{key:"closeChangeset",value:function(e){return this.put("/0.6/changeset/"+e+"/close").then(function(e){return e})}},{key:"getUserById",value:function(e){return this.getAuthenticated("/0.6/user/"+e)}},{key:"getUserDetails",value:function(){return this.getAuthenticated("/0.6/user/details")}},{key:"getUserPreferences",value:function(){return this.getAuthenticated("/0.6/user/preferences")}},{key:"putUserPreferences",value:function(e,t){return this.put("/0.6/user/preferences/"+e,t)}},{key:"getMap",value:function(e){return this.get("/0.6/map?bbox="+e)}},{key:"getNotes",value:function(e){var t="/0.6/notes?bbox="+e;return this.get(t)}},{key:"createNode",value:function(e){return this.put("/0.6/node/create",e)}},{key:"getNode",value:function(e){return this.get("/0.6/node/"+e)}},{key:"getNodeRelations",value:function(e){return this.get("/0.6/node/"+e+"/relations")}},{key:"getNodeWays",value:function(e){return this.get("/0.6/node/"+e+"/ways")}},{key:"getNodes",value:function(e){return this.get("/0.6/nodes?nodes="+e.join(","))}},{key:"deleteNode",value:function(e){return this.delete("/0.6/node/"+e)}},{key:"createWay",value:function(e){return this.put("/0.6/way/create",e)}},{key:"getWay",value:function(e){return this.get("/0.6/way/"+e)}},{key:"getWayRelations",value:function(e){return this.get("/0.6/way/"+e+"/relations")}},{key:"getWayFull",value:function(e){return this.get("/0.6/way/"+e+"/full")}},{key:"getWays",value:function(e){return this.get("/0.6/ways?ways="+e.join(","))}},{key:"deleteWay",value:function(e){return this.delete("/0.6/way/"+e)}},{key:"createRelation",value:function(e){return this.put("/0.6/relation/create",e)}},{key:"getRelation",value:function(e){return this.get("/0.6/relation/"+e)}},{key:"getRelationRelations",value:function(e){return this.get("/0.6/relation/"+e+"/relations")}},{key:"getRelationFull",value:function(e){return this.get("/0.6/relation/"+e+"/full")}},{key:"getRelations",value:function(e){return this.get("/0.6/relations?relations="+e.join(","))}},{key:"deleteRelation",value:function(e){return this.delete("/0.6/relation/"+e)}}]),e}();r.$inject=["$http","$q","osmx2js"],t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=angular.module("osm.x2js",[]).provider("osmx2js",function(){this.options={},this.$get=function(){return new X2JS(this.options)}});t.default=n},,,function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=u(r),i=n(1),a=u(i),s=n(3),l=u(s),c=angular.module("osm.oauth",[a.default.name,l.default.name]).provider("osmAuthService",function(){this.options={},this.$get=function(e,t){return new o.default(e,t,this.options)},this.$get.$inject=["$q","osmx2js"]});t.default=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),r=function(){function e(t,u,r){n(this,e),r&&r.oauth_secret&&r.oauth_consumer_key&&(this.auth=osmAuth(r)),this.osmx2js=u,this.$q=t,this._options=r}return u(e,[{key:"logout",value:function(){this.auth.logout()}},{key:"authenticated",value:function(){return this.auth.authenticated()}},{key:"authenticate",value:function(){var e=this.$q.defer();return this.auth.authenticate(function(){e.resolve(!0)}),e.promise}},{key:"xhr",value:function(e){var t=this,n=this.$q.defer();return e.path="/api"+e.path,e.data&&(e.content=e.data,delete e.data),this.auth.xhr(e,function(e,u){e?n.reject(e):u instanceof XMLDocument?n.resolve(t.osmx2js.dom2js(u)):n.resolve(u)}),n.promise}},{key:"options",value:function(e){this.auth?this.auth.options(e):this.auth=osmAuth(e)}}]),e}();r.$inject=["$q","osmx2js"],t.default=r}])});